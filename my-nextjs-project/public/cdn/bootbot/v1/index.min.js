function waitForInteraction(t){
    if(t.bot) return {...t, reason:"botd"};
  
    let interacted = false;
    const events = ["mousemove", "scroll", "keydown", "touchstart"];
  
    return new Promise(resolve => {
  
      const finish = () => {
        events.forEach(ev =>
          window.removeEventListener(ev, handler, { passive: true })
        );
  
        resolve({
          ...t,
          bot: !interacted,
          reason: interacted ? "clean" : "no-interaction"
        });
      };
  
      const handler = () => {
        interacted = true;
        finish();
      };
  
      events.forEach(ev =>
        window.addEventListener(ev, handler, { once: true, passive: true })
      );
  
      setTimeout(finish, 1200);
    });
  }
  
  import("https://openfpcdn.io/botd/v1")
    .then(r => r.load())
    .then(botd => botd.detect())
    .then(result => waitForInteraction(result))
    .catch(err => ({ bot:false, error:err }))
    .then(res => {
      window.bootbotResolve(res);
    });
  
  window.bootbot = new Promise(resolve => {
    window.bootbotResolve = resolve;
  });
  